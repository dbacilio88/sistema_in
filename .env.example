# ==================================
# DATABASE CONFIGURATION
# ==================================
DATABASE_URL=postgresql://admin:SecurePassword123!@postgres:5432/traffic_system
DB_HOST=postgres
DB_PORT=5432
DB_NAME=traffic_system
DB_USER=admin
DB_PASSWORD=SecurePassword123!

# TimescaleDB Configuration
TIMESCALEDB_ENABLED=true

# ==================================
# REDIS CONFIGURATION
# ==================================
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ==================================
# RABBITMQ CONFIGURATION
# ==================================
RABBITMQ_URL=amqp://admin:SecurePassword123!@rabbitmq:5672/
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=SecurePassword123!
RABBITMQ_VHOST=/

# ==================================
# MINIO CONFIGURATION
# ==================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=admin
MINIO_SECRET_KEY=SecurePassword123!
MINIO_BUCKET_SNAPSHOTS=traffic-snapshots
MINIO_BUCKET_VIDEOS=traffic-videos
MINIO_BUCKET_MODELS=ml-models
MINIO_USE_SSL=false

# ==================================
# DJANGO CONFIGURATION
# ==================================
DJANGO_SECRET_KEY=traffic-system-super-secret-key-change-in-production-2025
DJANGO_DEBUG=True
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,django,traffic-django
DJANGO_CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost:8001

# JWT Configuration
JWT_SECRET_KEY=traffic-jwt-secret-key-change-in-production-2025
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ==================================
# FASTAPI CONFIGURATION
# ==================================
FASTAPI_ENV=development
FASTAPI_DEBUG=True
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8001

# ==================================
# ML & INFERENCE CONFIGURATION
# ==================================
# Model paths
YOLO_MODEL_PATH=/app/models/yolov8x.onnx
PLATE_DETECTOR_MODEL_PATH=/app/models/plate_detector.onnx
OCR_MODEL=paddleocr

# Inference settings
INFERENCE_DEVICE=cuda  # cuda or cpu
GPU_DEVICE_ID=0
BATCH_SIZE=4
CONFIDENCE_THRESHOLD=0.5
NMS_IOU_THRESHOLD=0.45

# Performance
MAX_CONCURRENT_STREAMS=50
FRAME_BUFFER_SIZE=300
TARGET_FPS=30

# ==================================
# SUNARP API CONFIGURATION
# ==================================
SUNARP_API_URL=https://consultavehicular-sunarp.com
SUNARP_API_KEY=your-api-key-here
SUNARP_CACHE_TTL_HOURS=24
SUNARP_RATE_LIMIT=10000  # requests per month

# ==================================
# MLFLOW CONFIGURATION
# ==================================
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_EXPERIMENT_NAME=traffic_infractions
MLFLOW_ARTIFACT_ROOT=s3://ml-models/mlflow

# ==================================
# MONITORING CONFIGURATION
# ==================================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Sentry (Error tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==================================
# LOGGING CONFIGURATION
# ==================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE_PATH=/var/log/traffic-system

# ELK Stack
ELASTICSEARCH_URL=http://elasticsearch:9200
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5000
KIBANA_URL=http://kibana:5601

# ==================================
# CAMERA CONFIGURATION
# ==================================
# Default camera settings
DEFAULT_CAMERA_USERNAME=admin
DEFAULT_CAMERA_PASSWORD=Abc123456
RTSP_TIMEOUT_SECONDS=30
RTSP_RECONNECT_ATTEMPTS=5
RTSP_RECONNECT_DELAY_SECONDS=5

# ==================================
# SECURITY CONFIGURATION
# ==================================
# SSL/TLS
SSL_CERT_PATH=/certs/cert.pem
SSL_KEY_PATH=/certs/key.pem

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_CREDENTIALS=True
CORS_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_HEADERS=*

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ==================================
# BACKUP CONFIGURATION
# ==================================
BACKUP_ENABLED=True
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=traffic-system-backups

# ==================================
# EMAIL CONFIGURATION (Optional)
# ==================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@example.com
EMAIL_HOST_PASSWORD=your-app-password
EMAIL_FROM=noreply@traffic-system.com

# ==================================
# CELERY CONFIGURATION
# ==================================
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
CELERY_TASK_ALWAYS_EAGER=False
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=America/Lima

# ==================================
# TIMEZONE & LOCALE
# ==================================
TZ=America/Lima
LANGUAGE_CODE=es-pe
USE_TZ=True

# ==================================
# DEVELOPMENT TOOLS (Disable in production)
# ==================================
DJANGO_TOOLBAR_ENABLED=False
SILK_ENABLED=False
